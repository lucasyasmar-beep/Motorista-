<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#111827" />
  <title>Motorista ‚Äì Meta & Relat√≥rios</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icons/icon-192.png">
  <style>
    :root{
      --bg:#0b1220; --card:#111827; --muted:#94a3b8; --text:#e5e7eb;
      --accent:#22c55e; --danger:#ef4444; --warn:#f59e0b; --line:#1f2937;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1000px 600px at 20% 0%, rgba(34,197,94,.20), transparent 50%),
                  radial-gradient(900px 500px at 80% 10%, rgba(59,130,246,.15), transparent 55%),
                  var(--bg);
      color:var(--text);
      padding:16px 14px 90px;
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(11,18,32,.92), rgba(11,18,32,.65));
      padding:12px 4px 12px;
      margin:-16px -14px 12px;
      border-bottom:1px solid rgba(31,41,55,.6);
    }
    .wrap{max-width:720px; margin:0 auto;}
    h1{font-size:18px; margin:0 0 2px; letter-spacing:.2px;}
    .sub{font-size:12px; color:var(--muted); margin:0;}
    .grid{display:grid; gap:12px;}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(31,41,55,.85);
      border-radius:var(--r);
      box-shadow: var(--shadow);
      padding:14px;
    }
    .row{display:flex; gap:10px; align-items:center; justify-content:space-between;}
    .kpis{display:grid; grid-template-columns: 1fr 1fr; gap:12px;}
    .kpi{
      background: rgba(17,24,39,.65);
      border:1px solid rgba(31,41,55,.9);
      border-radius:16px;
      padding:12px;
    }
    .kpi .label{font-size:12px; color:var(--muted); margin:0 0 6px;}
    .kpi .val{font-size:22px; margin:0; font-weight:700;}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      font-size:12px; padding:8px 10px; border-radius:999px;
      border:1px solid rgba(31,41,55,.85);
      background: rgba(17,24,39,.7);
      color:var(--text);
    }
    .pill .dot{width:8px; height:8px; border-radius:999px; background:var(--warn);}
    .pill.good .dot{background:var(--accent);}
    .pill.bad .dot{background:var(--danger);}
    .progress{
      height:10px; background: rgba(148,163,184,.15);
      border-radius:999px; overflow:hidden; border:1px solid rgba(31,41,55,.8);
    }
    .progress > div{height:100%; width:0%; background:linear-gradient(90deg, rgba(34,197,94,.9), rgba(59,130,246,.7));}
    .btns{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:12px;}
    button{
      appearance:none; border:0; cursor:pointer;
      background: rgba(34,197,94,.16);
      color: var(--text);
      border: 1px solid rgba(34,197,94,.35);
      padding:12px 12px; border-radius:14px;
      font-weight:650; letter-spacing:.2px;
    }
    button.secondary{
      background: rgba(59,130,246,.14);
      border-color: rgba(59,130,246,.35);
    }
    button.ghost{
      background: rgba(255,255,255,.04);
      border-color: rgba(148,163,184,.22);
    }
    button.danger{
      background: rgba(239,68,68,.12);
      border-color: rgba(239,68,68,.35);
    }
    .tabs{
      display:flex; gap:8px; flex-wrap:wrap;
      padding:10px; background: rgba(17,24,39,.55);
      border:1px solid rgba(31,41,55,.85);
      border-radius: 16px;
    }
    .tab{
      flex:1; min-width: 130px;
      text-align:center;
      padding:10px 8px;
      border-radius: 14px;
      border:1px solid rgba(148,163,184,.22);
      background: rgba(255,255,255,.03);
      color: var(--text);
      cursor:pointer;
      font-weight:650;
      font-size:13px;
    }
    .tab.active{
      background: rgba(34,197,94,.18);
      border-color: rgba(34,197,94,.40);
    }
    label{display:block; font-size:12px; color:var(--muted); margin:10px 0 6px;}
    input, select, textarea{
      width:100%;
      background: rgba(17,24,39,.7);
      border: 1px solid rgba(31,41,55,.9);
      color: var(--text);
      padding: 12px 12px;
      border-radius: 14px;
      outline:none;
      font-size: 15px;
    }
    textarea{min-height:70px; resize:vertical;}
    .muted{color:var(--muted); font-size:12px;}
    .list{display:grid; gap:10px; margin-top:10px;}
    .item{
      padding:12px;
      border-radius:16px;
      background: rgba(17,24,39,.55);
      border:1px solid rgba(31,41,55,.85);
    }
    .item .top{display:flex; justify-content:space-between; gap:10px;}
    .tag{font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid rgba(148,163,184,.22); color:var(--muted);}
    .money{font-weight:800;}
    .footerNav{
      position:fixed; left:0; right:0; bottom:0;
      background: rgba(11,18,32,.88);
      border-top: 1px solid rgba(31,41,55,.7);
      backdrop-filter: blur(10px);
      padding:10px 12px;
      z-index:50;
    }
    .footerNav .wrap{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;}
    .navBtn{
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:6px; padding:10px 8px;
      border-radius:16px;
      background: rgba(255,255,255,.03);
      border:1px solid rgba(148,163,184,.18);
      color: var(--text);
      cursor:pointer;
      font-size:12px;
      font-weight:650;
    }
    .navBtn.active{
      background: rgba(34,197,94,.16);
      border-color: rgba(34,197,94,.35);
    }
    .navIcon{font-size:18px; line-height:1}
    .hide{display:none !important}
    .split{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    .right{text-align:right}
    .hr{height:1px; background:rgba(31,41,55,.8); margin:12px 0;}
    .mini{font-size:11px; color:var(--muted);}
    .toast{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:88px; z-index:999;
      background: rgba(17,24,39,.92);
      border:1px solid rgba(31,41,55,.9);
      padding:10px 12px; border-radius: 14px;
      max-width: calc(100% - 26px);
      box-shadow: var(--shadow);
      font-size:13px;
      opacity:0; pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-6px);}
    @media print{
      body{background:#fff; color:#000; padding:0}
      header, .footerNav, .btns, button, .tabs, .toast{display:none !important}
      .card{box-shadow:none; border:1px solid #ddd; background:#fff}
      .kpi{background:#fff}
      .tag{border:1px solid #ddd; color:#333}
      input, select, textarea{border:1px solid #ccc; color:#000}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Motorista ‚Äì Meta & Relat√≥rios</h1>
      <p class="sub" id="todayLabel">‚Äî</p>
    </div>
  </header>

  <main class="wrap">
    <!-- HOME -->
    <section id="view-home" class="grid">
      <div class="card">
        <div class="row">
          <div class="pill" id="statusPill"><span class="dot"></span><span id="statusText">‚Äî</span></div>
          <div class="mini" id="metaInfo">Meta: ‚Äî</div>
        </div>
        <div style="height:10px"></div>
        <div class="progress" aria-label="Progresso da meta">
          <div id="progressBar"></div>
        </div>
        <div style="height:12px"></div>
        <div class="kpis">
          <div class="kpi">
            <p class="label">Ganhos (hoje)</p>
            <p class="val" id="kpiGanhos">R$ 0,00</p>
          </div>
          <div class="kpi">
            <p class="label">Gastos (hoje)</p>
            <p class="val" id="kpiGastos">R$ 0,00</p>
          </div>
          <div class="kpi">
            <p class="label">Lucro l√≠quido (hoje)</p>
            <p class="val" id="kpiLucro">R$ 0,00</p>
          </div>
          <div class="kpi">
            <p class="label">Falta / Sobrou</p>
            <p class="val" id="kpiFalta">R$ 0,00</p>
          </div>
        </div>

        <div class="btns">
          <button id="btnAddGanho">+ Lan√ßar ganho do dia</button>
          <button class="secondary" id="btnAddGasto">+ Lan√ßar gasto</button>
        </div>

        <div class="hr"></div>
        <div class="row">
          <div class="muted">Dica: lance o <b>total do dia</b> e os gastos. O resto √© autom√°tico.</div>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <div>
            <div style="font-weight:800">Lan√ßamentos de hoje</div>
            <div class="muted" id="todaySummary">‚Äî</div>
          </div>
          <button class="ghost" id="btnClearToday">Limpar hoje</button>
        </div>
        <div class="list" id="todayList"></div>
      </div>
    </section>

    <!-- REPORTS -->
    <section id="view-reports" class="grid hide">
      <div class="card">
        <div class="tabs" role="tablist">
          <div class="tab active" data-range="day">Di√°rio</div>
          <div class="tab" data-range="week">Semanal</div>
          <div class="tab" data-range="month">Mensal</div>
        </div>

        <div id="reportHeader" style="margin-top:12px">
          <div style="font-weight:850; font-size:16px" id="reportTitle">Relat√≥rio di√°rio</div>
          <div class="muted" id="reportSubtitle">‚Äî</div>
        </div>

        <div class="hr"></div>

        <div class="kpis">
          <div class="kpi"><p class="label">Ganhos</p><p class="val" id="rGanhos">R$ 0,00</p></div>
          <div class="kpi"><p class="label">Gastos</p><p class="val" id="rGastos">R$ 0,00</p></div>
          <div class="kpi"><p class="label">Lucro l√≠quido</p><p class="val" id="rLucro">R$ 0,00</p></div>
          <div class="kpi"><p class="label">Dias considerados</p><p class="val" id="rDias">0</p></div>
        </div>

        <div class="hr"></div>

        <div class="split">
          <div class="item">
            <div class="top"><div style="font-weight:800">Meta</div><span class="tag" id="rMetaTag">‚Äî</span></div>
            <div class="muted" id="rMetaNote" style="margin-top:6px">‚Äî</div>
          </div>
          <div class="item">
            <div class="top"><div style="font-weight:800">M√©dia de lucro</div><span class="tag" id="rMediaTag">‚Äî</span></div>
            <div class="muted" id="rMediaNote" style="margin-top:6px">‚Äî</div>
          </div>
        </div>

        <div class="hr"></div>

        <div class="row">
          <div style="font-weight:800">Gastos por categoria</div>
          <div class="mini">Top categorias do per√≠odo</div>
        </div>
        <div class="list" id="rCats"></div>

        <div class="hr"></div>

        <div class="row">
          <button class="ghost" id="btnCSV">Exportar CSV</button>
          <button class="secondary" id="btnPDF">Salvar PDF (imprimir)</button>
        </div>
        <div class="muted" style="margin-top:10px">
          PDF: o Android abre a impress√£o; escolha <b>Salvar como PDF</b>.
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section id="view-settings" class="grid hide">
      <div class="card">
        <div style="font-weight:850; font-size:16px">Configura√ß√µes</div>
        <div class="muted">Meta edit√°vel e categorias de gasto.</div>

        <label for="metaInput">Meta di√°ria (R$)</label>
        <input id="metaInput" inputmode="decimal" placeholder="Ex: 400" />

        <label for="catsInput">Categorias (uma por linha)</label>
        <textarea id="catsInput" placeholder="combust√≠vel&#10;aluguel&#10;ped√°gio&#10;lanche&#10;manuten√ß√£o&#10;outros"></textarea>

        <div class="btns">
          <button id="btnSaveSettings">Salvar</button>
          <button class="danger" id="btnResetAll">Zerar tudo</button>
        </div>

        <div class="hr"></div>
        <div class="muted">
          Seus dados ficam <b>somente no seu celular</b> (offline).
        </div>
      </div>
    </section>

    <!-- MODALS (simple) -->
    <section id="modal" class="hide" style="position:fixed; inset:0; z-index:1000; background:rgba(0,0,0,.55);">
      <div class="wrap" style="padding:16px; height:100%; display:flex; align-items:flex-end;">
        <div class="card" style="width:100%; margin-bottom:70px;">
          <div class="row">
            <div style="font-weight:850" id="modalTitle">‚Äî</div>
            <button class="ghost" id="modalClose">Fechar</button>
          </div>
          <div id="modalBody"></div>
        </div>
      </div>
    </section>

    <div class="toast" id="toast">‚Äî</div>
  </main>

  <nav class="footerNav">
    <div class="wrap">
      <div class="navBtn active" data-view="home"><div class="navIcon">üè†</div><div>Hoje</div></div>
      <div class="navBtn" data-view="reports"><div class="navIcon">üìä</div><div>Relat√≥rios</div></div>
      <div class="navBtn" data-view="settings"><div class="navIcon">‚öôÔ∏è</div><div>Ajustes</div></div>
    </div>
  </nav>

<script src="app.js"></script>
</body>
</html>
